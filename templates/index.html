{% extends "base.html" %}

{% block title %}–ì–ª–∞–≤–Ω–∞—è - –ê–¥–º–∏–Ω–∫–∞ Telegram-–±–æ—Ç–∞{% endblock %}

{% block content %}
<div class="container-fluid">
    <!-- –ó–∞–≥–æ–ª–æ–≤–æ–∫ -->
    <div class="row mb-4">
        <div class="col-12">
            <h1 class="display-4">–ü–∞–Ω–µ–ª—å —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è Telegram-–±–æ—Ç–æ–º</h1>
            <p class="lead">–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –≥—Ä—É–ø–ø–∞–º–∏, –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–∞–º–∏ –∏ –∑–∞–ø—Ä–æ—Å–∞–º–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π</p>
        </div>
    </div>

    <!-- –ö–∞—Ä—Ç–æ—á–∫–∏ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏ -->
    <div class="row mb-4">
        <div class="col-md-4">
            <div class="card text-white bg-primary h-100 shadow">
                <div class="card-header">–ì—Ä—É–ø–ø—ã</div>
                <div class="card-body d-flex flex-column">
                    <h5 class="card-title display-4">{{ group_count }}</h5>
                    <p class="card-text">–ê–∫—Ç–∏–≤–Ω—ã—Ö –≥—Ä—É–ø–ø</p>
                    <a href="{{ url_for('groups') }}" class="btn btn-light mt-auto">–ü–æ–¥—Ä–æ–±–Ω–µ–µ</a>
                </div>
            </div>
        </div>
        <div class="col-md-4">
            <div class="card text-white bg-success h-100 shadow">
                <div class="card-header">–ê–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä—ã</div>
                <div class="card-body d-flex flex-column">
                    <h5 class="card-title display-4">{{ admin_count }}</h5>
                    <p class="card-text">–ó–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞–Ω–æ</p>
                    <a href="{{ url_for('admins') }}" class="btn btn-light mt-auto">–ü–æ–¥—Ä–æ–±–Ω–µ–µ</a>
                </div>
            </div>
        </div>
        <div class="col-md-4">
            <div class="card text-white bg-warning h-100 shadow">
                <div class="card-header">–ó–∞–ø—Ä–æ—Å—ã</div>
                <div class="card-body d-flex flex-column">
                    <h5 class="card-title display-4">{{ request_count }}</h5>
                    <p class="card-text">–ü–æ—Å–ª–µ–¥–Ω–∏–µ –∑–∞–ø—Ä–æ—Å—ã</p>
                    <a href="{{ url_for('requests') }}" class="btn btn-light mt-auto">–ü–æ–¥—Ä–æ–±–Ω–µ–µ</a>
                </div>
            </div>
        </div>
    </div>

    <!-- –ü–æ—Å–ª–µ–¥–Ω–∏–µ –∑–∞–ø—Ä–æ—Å—ã –∏ –≥—Ä–∞—Ñ–∏–∫–∏ -->
    <div class="row">
        <!-- –ü–æ—Å–ª–µ–¥–Ω–∏–µ –∑–∞–ø—Ä–æ—Å—ã -->
        <div class="col-lg-8">
            <div class="card shadow">
                <div class="card-header bg-white">
                    <h5 class="card-title mb-0">–ü–æ—Å–ª–µ–¥–Ω–∏–µ –∑–∞–ø—Ä–æ—Å—ã –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π</h5>
                </div>
                <div class="card-body">
                    <div class="table-responsive">
                        <table class="table table-hover">
                            <thead>
                                <tr>
                                    <th>ID –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è</th>
                                    <th>–ò–º—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è</th>
                                    <th>–ì—Ä—É–ø–ø–∞</th>
                                    <th>–°–æ–æ–±—â–µ–Ω–∏–µ</th>
                                    <th>–î–∞—Ç–∞</th>
                                </tr>
                            </thead>
                            <tbody>
                                {% for req in recent_requests %}
                                <tr>
                                    <td>{{ req.user_id or 'N/A' }}</td>
                                    <td>{{ req.username or 'N/A' }}</td>
                                    <td>{{ req.group_id or 'N/A' }}</td>
                                    <td>{% if req.message_text %}{{ req.message_text[:50] }}{% if req.message_text|length > 50 %}...{% endif %}{% else %}N/A{% endif %}</td>
                                    <td>{% if req.created_at %}{{ req.created_at.strftime('%d.%m.%Y %H:%M') }}{% else %}N/A{% endif %}</td>
                                </tr>
                                {% endfor %}
                            </tbody>
                        </table>
                    </div>
                </div>
            </div>
        </div>

        <!-- –ì—Ä–∞—Ñ–∏–∫–∏ -->
        <div class="col-lg-4">
            <div class="card shadow mb-4">
                <div class="card-header bg-white">
                    <h5 class="card-title mb-0">–°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞</h5>
                </div>
                <div class="card-body">
                    <div class="d-flex justify-content-center align-items-center" style="height: 200px;">
                        <div class="text-center">
                            <div class="display-1 text-primary">üìä</div>
                            <p class="mt-2">–ì—Ä–∞—Ñ–∏–∫–∏ –∏ –¥–∏–∞–≥—Ä–∞–º–º—ã</p>
                            <small class="text-muted">–ë—É–¥—É—Ç –¥–æ–±–∞–≤–ª–µ–Ω—ã –≤ —Å–ª–µ–¥—É—é—â–∏—Ö –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è—Ö</small>
                        </div>
                    </div>
                </div>
            </div>

            <!-- –ë—ã—Å—Ç—Ä—ã–µ –¥–µ–π—Å—Ç–≤–∏—è -->
            <div class="card shadow">
                <div class="card-header bg-white">
                    <h5 class="card-title mb-0">–ë—ã—Å—Ç—Ä—ã–µ –¥–µ–π—Å—Ç–≤–∏—è</h5>
                </div>
                <div class="card-body">
                    <div class="d-grid gap-2">
                        <a href="{{ url_for('groups') }}" class="btn btn-primary">–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –≥—Ä—É–ø–ø–∞–º–∏</a>
                        <a href="{{ url_for('admins') }}" class="btn btn-success">–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∞–¥–º–∏–Ω–∞–º–∏</a>
                        <a href="{{ url_for('requests') }}" class="btn btn-warning">–ü—Ä–æ—Å–º–æ—Ç—Ä –∑–∞–ø—Ä–æ—Å–æ–≤</a>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
{% endblock %}