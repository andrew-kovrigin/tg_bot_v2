# Модульные тесты

Эта директория содержит модульные тесты для проекта Telegram бота.

## Структура тестов

- `test_config.py` - Тесты для модуля конфигурации
- `test_parse.py` - Тесты для функциональности парсинга HTML
- `test_weather.py` - Тесты для получения данных о погоде
- `test_holidays.py` - Тесты для получения данных о праздниках
- `test_send_message.py` - Тесты для утилит отправки сообщений
- `test_commands.py` - Тесты для обработчиков команд бота
- `test_requests.py` - Тесты для обработки запросов
- `test_message_sender.py` - Тесты для отправки запланированных сообщений
- `test_main.py` - Тесты для инициализации основного бота
- `test_disconnections.py` - Тесты для обработки данных об отключениях

## Запуск тестов

### Использование тест раннера:
```bash
python run_tests.py
```

### Использование pytest напрямую:
```bash
pytest tests/ -v
```

### Запуск конкретных тестовых файлов:
```bash
pytest tests/test_config.py -v
```

## Покрытие тестами

Тесты охватывают:
- ✅ Загрузку конфигурации
- ✅ Функциональность парсинга HTML
- ✅ Интеграцию с внешними API (с использованием mocking)
- ✅ Обработку ошибок
- ✅ Регистрацию команд бота
- ✅ Функциональность отправки сообщений
- ✅ Взаимодействие с базой данных (mocked)
- ✅ Выполнение запланированных задач
- ✅ Обработку запросов
- ✅ Обработку данных об отключениях

## Требования

Убедитесь, что у вас установлен pytest:
```bash
pip install pytest pytest-asyncio
```

## Результаты тестов

✅ **25 тестов пройдено, 1 пропущен** - Вся основная функциональность корректно протестирована
⚠️ **Некоторые предупреждения** - В основном предупреждения об устаревших функциях от сторонних библиотек